import os
from dotenv import load_dotenv

load_dotenv()

API_ID = int(os.getenv("API_ID", 0))
API_HASH = os.getenv("API_HASH", "")
PHONES = os.getenv("PHONES", "").split(",")

keys_str = os.getenv("GEMINI_API_KEYS", "")
if not keys_str:
    single_key = os.getenv("GEMINI_API_KEY")
    GEMINI_KEYS = [single_key] if single_key else []
else:
    GEMINI_KEYS = [k.strip() for k in keys_str.split(",") if k.strip()]

YANDEX_TOKEN = os.getenv("YANDEX_TOKEN")
EXCHANGE_KEY = os.getenv("EXCHANGE_API_KEY")
SETTINGS_FILE = "settings.json"

# --- –õ–ò–ù–ì–í–ò–°–¢–ò–ö–ê ---

# –°—Ç–æ–ø-—Å–ª–æ–≤–∞ (–Ω–µ —É—á–∏—Ç—ã–≤–∞–µ–º –≤ —Ç–æ–ø–µ —Å–ª–æ–≤)
STOP_WORDS = {
    '–∏', '–≤', '–≤–æ', '–Ω–µ', '–Ω–∞', '—è', '—Å', '—Å–æ', '–æ–Ω', '–æ–Ω–∞', '–æ–Ω–æ', '–æ–Ω–∏', '–∞', '–Ω–æ',
    '–¥–∞', '–Ω–µ—Ç', '–∫', '—É', '–ø–æ', '–∑–∞', '–æ—Ç', '–æ', '–∏–∑', '–Ω—É', '—Ç—ã', '–º—ã', '–≤—ã',
    '–∂–µ', '—Ç–æ', '–±—ã', '–¥–ª—è', '–¥–æ', '–≥–¥–µ', '–∫–∞–∫', '—Ç–∞–∫', '—á—Ç–æ', '–∏–ª–∏', '—ç—Ç–æ', '—ç—Ç–∏',
    '—Ç–æ—Ç', '—Ç–µ', '—Ç–∞–º', '—Ç—É—Ç', '–≤—Å–µ', '–≤—Å—ë', '—É–∂–µ', '–µ—â–µ', '–µ—â—ë', '—Ä–∞–∑', '–¥–≤–∞',
    '–º–æ–π', '—Ç–≤–æ–π', '–Ω–∞—à', '–≤–∞—à', '–∫—Ç–æ', '—Ç—É—Ç', '–º–Ω–µ', '–º–µ–Ω—è', '—Ç–µ–±—è', '—Ç–µ–±–µ',
    '–±—ã–ª', '–±—ã–ª–∞', '–±—ã–ª–∏', '–µ—Å—Ç—å', '–±—É–¥–µ—Ç', '–µ—Å–ª–∏', '—á–µ—Ä–µ–∑', '–ø—Ä–∏', '–Ω–∞–¥',
    'the', 'a', 'an', 'in', 'on', 'at', 'to', 'for', 'of', 'and', 'or', 'is', 'are'
}

# 1. –¢–æ—á–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è (–º–∞—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Å–ª–æ–≤–æ —Ü–µ–ª–∏–∫–æ–º —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —ç—Ç–∏–º)
BAD_EXACT = {
    '—Ö—É–π', '—Ö–µ—Ä', '–±–ª—è', '—Å—É–∫–∞', '–µ–±', '—ë–±', '–ª–æ—Ö', '—á–º–æ', '–µ–ø—Ç', '–º–ª—è', '–Ω–∞—Ö', "–∑–∞–µ–±–∏—Å—å", "–º—É–¥–∞–∫", "–º–∞–Ω–¥–∞", "–µ–±–µ–Ω—å"
}

# 2. –ú–∞—Ç, –µ—Å–ª–∏ —Å–ª–æ–≤–æ –ù–ê–ß–ò–ù–ê–ï–¢–°–Ø —Å —ç—Ç–æ–≥–æ (–ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≥–ª–∞–≥–æ–ª—ã –∏ –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã–µ)
# –≠—Ç–æ —Å–ø–∞—Å–∞–µ—Ç –æ—Ç –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π —Ç–∏–ø–∞ "–∫–æ–ª–µ–±–∞–Ω–∏–µ" (—Å–æ–¥–µ—Ä–∂–∏—Ç –µ–±–∞), "–ø–æ—Ç—Ä–µ–±–ª—è—Ç—å" (—Å–æ–¥–µ—Ä–∂–∏—Ç –µ–±–ª—è)
BAD_STARTS = [
    '—Ö—É–µ', '—Ö—É—ë', '—Ö—É—è',  # —Ö—É–µ–≤—ã–π
    "–∞—Ö—É",
    '–µ–±–∞', '–µ–±—ë', '–µ–±—É', '–µ–±–∏', # –µ–±–∞—Ç—å, –µ–±—É—á–∏–π
    '—ë–±–∞', '—ë–±–Ω', # —ë–±–∞–Ω—ã–π
    '–∑–∞–µ–±', '–¥–æ–µ–±', '–ø–æ–µ–±', '–Ω–∞–µ–±', '–≤—ã–µ–±', '—É–µ–±', '–ø–µ—Ä–µ–µ–±', # –ø—Ä–∏—Å—Ç–∞–≤–∫–∏
    '—Å—É—á', '—Ö—Ä–µ–Ω–æ'
]

# 3. –ñ–µ—Å—Ç–∫–∏–µ –∫–æ—Ä–Ω–∏ (–º–∞—Ç, –µ—Å–ª–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –ì–î–ï –£–ì–û–î–ù–û –≤ —Å–ª–æ–≤–µ)
# –≠—Ç–∏ —Å–æ—á–µ—Ç–∞–Ω–∏—è –∫—Ä–∞–π–Ω–µ —Ä–µ–¥–∫–æ –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è –≤ –Ω–æ—Ä–º–∞–ª—å–Ω—ã—Ö —Å–ª–æ–≤–∞—Ö
BAD_CONTAINS = [
    '–ø–∏–∑–¥', '–ø–∏–∑–∂', # –ø–∏–∑–¥–µ—Ü
    '–±–ª—è–¥', '–±–ª—è—Ü', # –±–ª—è–¥–∏–Ω–∞ (–Ω–æ –Ω–µ –±–ª—è -> –æ—Å–∫–æ—Ä–±–ª—è—Ç—å)
    '–µ–±–ª', # –µ–±–ª–æ (–Ω–æ –Ω–µ –µ–± -> –º–µ–±–µ–ª—å)
    '–≥–æ–≤–Ω–æ', '–≥–∞–≤–Ω–æ',
    '—à–ª—é—Ö', '–ø–∏–¥–æ—Ä', '–≥–∞–Ω–¥–æ–Ω'
]

# --- –ú–û–î–ï–õ–ò –ò –ì–û–õ–û–°–ê ---

AVAILABLE_VOICES = {
    # --- –ú—É–∂—Å–∫–∏–µ ---
    "1": {"name": "Puck", "gender": "M", "desc": "–ë–æ–¥—Ä—ã–π, —Å—Ä–µ–¥–Ω–∏–π —Ç–æ–Ω"},
    "2": {"name": "Charon", "gender": "M", "desc": "–ì–ª—É–±–æ–∫–∏–π, –Ω–∏–∑–∫–∏–π"},
    "3": {"name": "Fenrir", "gender": "M", "desc": "–ë–∞—Å–∏—Å—Ç—ã–π, —ç–Ω–µ—Ä–≥–∏—á–Ω—ã–π"},
    "4": {"name": "Orus", "gender": "M", "desc": "–¢–≤–µ—Ä–¥—ã–π, –Ω–∏–∂–µ —Å—Ä–µ–¥–Ω–µ–≥–æ"},
    "5": {"name": "Enceladus", "gender": "M", "desc": "–° –ø—Ä–∏–¥—ã—Ö–∞–Ω–∏–µ–º, –Ω–∏–∑–∫–∏–π"},
    "6": {"name": "Iapetus", "gender": "M", "desc": "–ß–∏—Å—Ç—ã–π, –Ω–∏–∂–µ —Å—Ä–µ–¥–Ω–µ–≥–æ"},
    "7": {"name": "Umbriel", "gender": "M", "desc": "–°–ø–æ–∫–æ–π–Ω—ã–π, –Ω–∏–∂–µ —Å—Ä–µ–¥–Ω–µ–≥–æ"},
    "8": {"name": "Algieba", "gender": "M", "desc": "–ì–ª–∞–¥–∫–∏–π, –Ω–∏–∑–∫–∏–π"},
    "9": {"name": "Algenib", "gender": "M", "desc": "–•—Ä–∏–ø–ª—ã–π, –Ω–∏–∑–∫–∏–π"},
    "10": {"name": "Achernar", "gender": "M", "desc": "–ú—è–≥–∫–∏–π, –≤—ã—Å–æ–∫–∏–π"},
    "11": {"name": "Alnilam", "gender": "M", "desc": "–¢–≤–µ—Ä–¥—ã–π, –Ω–∏–∂–µ —Å—Ä–µ–¥–Ω–µ–≥–æ"},
    "12": {"name": "Schedar", "gender": "M", "desc": "–†–æ–≤–Ω—ã–π, –Ω–∏–∂–µ —Å—Ä–µ–¥–Ω–µ–≥–æ"},
    "13": {"name": "Zubenelgenubi", "gender": "M", "desc": "–ù–µ–±—Ä–µ–∂–Ω—ã–π, –Ω–∏–∂–µ —Å—Ä–µ–¥–Ω–µ–≥–æ"},
    # --- –ñ–µ–Ω—Å–∫–∏–µ ---
    "14": {"name": "Zephyr", "gender": "F", "desc": "–°–≤–µ—Ç–ª—ã–π, –≤—ã—Å–æ–∫–∏–π"},
    "15": {"name": "Kore", "gender": "F", "desc": "–¢–≤–µ—Ä–¥—ã–π, —Å—Ä–µ–¥–Ω–∏–π"},
    "16": {"name": "Leda", "gender": "F", "desc": "–ú–æ–ª–æ–¥–æ–π, –≤—ã—Å–æ–∫–∏–π"},
    "17": {"name": "Aoede", "gender": "F", "desc": "–õ–µ–≥–∫–∏–π, —Å—Ä–µ–¥–Ω–∏–π"},
    "18": {"name": "Callirrhoe", "gender": "F", "desc": "–ë–µ–∑–∑–∞–±–æ—Ç–Ω—ã–π, —Å—Ä–µ–¥–Ω–∏–π"},
    "19": {"name": "Autonoe", "gender": "F", "desc": "–Ø—Ä–∫–∏–π, —Å—Ä–µ–¥–Ω–∏–π"},
    "20": {"name": "Despina", "gender": "F", "desc": "–ì–ª–∞–¥–∫–∏–π, —Å—Ä–µ–¥–Ω–∏–π"},
    "21": {"name": "Erinome", "gender": "F", "desc": "–ß–∏—Å—Ç—ã–π, —Å—Ä–µ–¥–Ω–∏–π"},
    "22": {"name": "Rasalgethi", "gender": "F", "desc": "–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–π, —Å—Ä–µ–¥–Ω–∏–π"},
    "23": {"name": "Laomedeia", "gender": "F", "desc": "–ë–æ–¥—Ä—ã–π, –≤—ã—Å–æ–∫–∏–π"},
    "24": {"name": "Gacrux", "gender": "F", "desc": "–ó—Ä–µ–ª—ã–π, —Å—Ä–µ–¥–Ω–∏–π"},
    "25": {"name": "Pulcherrima", "gender": "F", "desc": "–ü—Ä—è–º–æ–ª–∏–Ω–µ–π–Ω—ã–π, —Å—Ä–µ–¥–Ω–∏–π"},
    "26": {"name": "Achird", "gender": "F", "desc": "–î—Ä—É–∂–µ–ª—é–±–Ω—ã–π, –Ω–∏–∂–µ —Å—Ä–µ–¥–Ω–µ–≥–æ"},
    "27": {"name": "Vindemiatrix", "gender": "F", "desc": "–ù–µ–∂–Ω—ã–π, —Å—Ä–µ–¥–Ω–∏–π"},
    "28": {"name": "Sadachbia", "gender": "F", "desc": "–ñ–∏–≤–æ–π, –Ω–∏–∑–∫–∏–π"},
    "29": {"name": "Sadaltager", "gender": "F", "desc": "–ó–Ω–∞—é—â–∏–π, —Å—Ä–µ–¥–Ω–∏–π"},
    "30": {"name": "Sulafat", "gender": "F", "desc": "–¢–µ–ø–ª—ã–π, —Å—Ä–µ–¥–Ω–∏–π"}
}

AVAILABLE_MODELS = {
    "1": {"id": "gemini-2.5-flash", "name": "‚ö°Ô∏è 2.5 Flash (Google Search)", "search": True},
    "2": {"id": "gemini-2.5-pro", "name": "üß† 2.5 Pro (Thinking)", "search": False},
    "3": {"id": "gemini-2.0-flash", "name": "üöÄ 2.0 Flash (Fast)", "search": False},
}

AVAILABLE_TTS_MODELS = {
    "1": "gemini-2.5-pro-preview-tts",
    "2": "gemini-2.5-flash-preview-tts",
}

VOICE_NAMES_LIST = [
    "Puck", "Zephyr", "Fenrir", "Leda", "Charon", "Aoede",
    "Orus", "Autonoe", "Algenib", "Erinome", "Enceladus", "Kore"
]

HELP_DICT = {
    "üß† **–ù–µ–π—Ä–æ—Å–µ—Ç–∏ (AI):**": {
        "`.ai` / `.–∞–∏` _[–∑–∞–ø—Ä–æ—Å]_": "–†–∞–∑–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å –∫ Gemini (–±–µ–∑ –ø–∞–º—è—Ç–∏).",
        "`.chat` / `.—á–∞—Ç` _[—Ç–µ–∫—Å—Ç]_": "–î–∏–∞–ª–æ–≥ —Å –ø–∞–º—è—Ç—å—é –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.",
        "`.text` / `.stt` _(Reply)_": "–†–∞—Å–ø–æ–∑–Ω–∞—Ç—å –ì–°/–í–∏–¥–µ–æ –≤ —Ç–µ–∫—Å—Ç (—Å —ç–º–æ—Ü–∏—è–º–∏).",
        "`.ait` _[—Ç–µ–º–∞]_": "–ù–∞–ø–∏—Å–∞—Ç—å —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—É—é —Å—Ç–∞—Ç—å—é –≤ Telegraph.",
        "`.chatt` _[—Ç–µ–∫—Å—Ç]_": "–û—Ç–≤–µ—Ç —á–∞—Ç–∞ –≤ –≤–∏–¥–µ —Å—Ç–∞—Ç—å–∏ Telegraph.",
        "`.model` / `.–º–æ–¥–µ–ª—å`": "–í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ (Flash/Pro).",
        "`.history`": "–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è.",
        "`.reset`": "–°–±—Ä–æ—Å –ø–∞–º—è—Ç–∏ –¥–∏–∞–ª–æ–≥–∞."
    },
    "üîä **–ó–≤—É–∫ (Voice):**": {
        "`.say` / `.—Å–∫–∞–∂–∏` _[—Ç–µ–∫—Å—Ç]_": "–û–∑–≤—É—á–∏—Ç—å —Ç–µ–∫—Å—Ç (–æ—Ç–ø—Ä–∞–≤–∏—Ç –ì–°).",
        "`.saywav` _[—Ç–µ–∫—Å—Ç]_": "–û–∑–≤—É—á–∏—Ç—å —Ç–µ–∫—Å—Ç (–æ—Ç–ø—Ä–∞–≤–∏—Ç WAV —Ñ–∞–π–ª).",
        "`.sayfree` / `.—Ä—É` _[—Ç–µ–∫—Å—Ç]_": "–†–µ–∑–µ—Ä–≤–Ω–∞—è –æ–∑–≤—É—á–∫–∞ (FreeTTS).",
        "`.voice` / `.–≥–æ–ª–æ—Å`": "–í—ã–±–æ—Ä –≥–æ–ª–æ—Å–∞ (Puck, Kore...).",
        "`.ttsmodel`": "–í—ã–±–æ—Ä –¥–≤–∏–∂–∫–∞ (Pro/Flash).",
        "`.dialog` / `.t` _[—Å—Ü–µ–Ω–∞—Ä–∏–π]_": "–û–∑–≤—É—á–∏—Ç—å –¥–∏–∞–ª–æ–≥ –ø–æ —Ä–æ–ª—è–º.",
        "`.podcast` _[—Ç–µ–º–∞]_": "–°–æ–∑–¥–∞—Ç—å –∏ –æ–∑–≤—É—á–∏—Ç—å –ø–æ–¥–∫–∞—Å—Ç."
    },
    "üõ† **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**": {
        "`.stat` / `.—Å—Ç–∞—Ç` _[–º–µ—Å—è—Ü/–≥–æ–¥]_": "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —á–∞—Ç–∞ (—Ç–æ–ø —Å–ª–æ–≤, –º–∞—Ç, –ª—é–¥–∏).",
        "`.cal` / `.–∫–∞–ª` _[2+2]_": "–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä.",
        "`.cur` / `.–∫–æ–Ω` _[100 USD]_": "–ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –≤–∞–ª—é—Ç.",
        "`.dl` / `.–¥–ª` _[—Å—Å—ã–ª–∫–∞]_": "–°–∫–∞—á–∞—Ç—å –≤–∏–¥–µ–æ/–º—É–∑—ã–∫—É.",
        "`.olx` _[–∑–∞–ø—Ä–æ—Å]_": "–ü–∞—Ä—Å–∏–Ω–≥ OLX –≤ Excel.",
        "`.sys` / `.—Å–∏—Å`": "–°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞ (RPi).",
        "`.s` / `.—Å` _[—Ç–µ–∫—Å—Ç]_": "–£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–±–µ–ª—ã."
    },
    "üé≠ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏:**": {
        "`.sysglobal` _[—Ç–µ–∫—Å—Ç]_": "–ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ä–æ–ª—å –¥–ª—è AI.",
        "`.syschat` _[—Ç–µ–∫—Å—Ç]_": "–†–æ–ª—å –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —á–∞—Ç–∞.",
        "`.bl` / `.—á—Å` _(Reply)_": "–í —á–µ—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫.",
        "`.unbl`": "–£–±—Ä–∞—Ç—å –∏–∑ –ß–°."
    },
    "ü§° **–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è:**": {
        "`.sar` _[—Ç–µ–∫—Å—Ç]_": "–°–¥–ï–ª–ê—Ç–¨ —Å–ê—Ä–ö–∞–ó–º.",
        "`.spam` _[—á–∏—Å–ª–æ]_": "–°–ø–∞–º —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏.",
        "`.shrek` / `.girl`": "ASCII –∞—Ä—Ç—ã."
    }
}